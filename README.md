MCP Server for PNSearch

PNSearchの検索結果を基にエージェントが回答してくれるようにするため、
エージェントにPNSearchを使ってもらうようにするMCPサーバーをセットアップします。

## Setting

1. 事前にPNSearchサーバーを立てておく必要があります。

```
$ pnsearch -p 9000
```

2. コーディングアシスタント(gemini-cli, claude-code, ROO, Cursorなど)を使用できるようにしておく必要があります。

3. コーディングアシスタントの設定でMCPサーバーとしてpnagentが使用できるようにしておく必要があります。

```json:.gemini/settings.json
{
  "mcpServers": {
    "pnagent": {
      "command": "deno",
      "args": ["run",  "-A",  "./pnagent.ts"]
    }
  }
}
```

## Usage

```
$ PNSEARCH_BASE='http://192.168.1.11:9000' gemini
╭─────────────────────────────────────────╮
│  > 品番AAA-100の在庫数を調べてください  │
╰─────────────────────────────────────────╯

 ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────╮
 │ ✔  PNSearch Stock search (pnagent MCP Server) {"品番":"AAA-100"}                                         │
 │                                                                                                          │
 │    {"url":"http://192.168.10.110:9000/api/v1/filter/stock?品番=AAA-100&select=品番&select=品名&select=   │
 │    型式&select=在庫数&select=単位&orderby=品番","result":[{"品番":"AAA-100","品名":"Some Parts Name"     │
 ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────╯

 ✦ 品番AAA-100の在庫数は4です。
```

## PNSearch APIについて
結果の表示列はselectプロパティから選択してください。
コンテキストの増加を抑える目的で、必要最小限に選択してください。

### 在庫検索で選択できる列
[品番, 品名, 型式, 在庫数, 単位, 在庫単価, 備考]

### 発注履歴検索で選択できる列
[
  製番,
  製番枝番,
  工事名称,  // 製番名称と同義
  部品表行番号,
  レベル,
  出庫指示番号,
  品番,
  品名,
  型式,
  手配数量,
  出庫数量,
  受入数量,
  発注数量,
  原価計上数量,
  単位,
  部品表作成日,
  手配納期,
  出庫処理日,
  受入日,
  発注納期,
  仕入先,
  発注単価,
  原価計上単価,
  発注額,
  原価計上額,
  装置名,
  号機,
  メーカ,
  備考,
  発注処理者,
  発注番号,
  検区,
  諸口品,
]

### 製番検索で選択できる列
[製番, 製番枝番, 製番名称, 受注・試作番号, 納期, 備考]

### RequestToolのプロパティ名
#### RequesttoolHeaderのプロパティ名:
- 発注区分
- 製番
- 製番名称
- 要求年月日
- 製番納期
- ファイル名
- 要求元
- 備考


#### RequesttoolOrdersのプロパティ名:
- Lv
- 品番
- 品名
- 型式
- 在庫数
- 数量
- 単位
- 要望納期
- 検区
- 装置名
- 号機
- メーカ
- 要望先
- 予定単価
- 金額

# Example
> AAA-100の在庫数を調べた上で、そいつを 装置名ABC-123 の最新の製番ですべて出庫してくれ。納期は来月末。
